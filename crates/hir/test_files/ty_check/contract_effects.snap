---
source: crates/hir/tests/ty_check.rs
assertion_line: 40
expression: res
input_file: test_files/ty_check/contract_effects.fe
---
note: 
   ┌─ contract_effects.fe:11:9
   │
11 │         Deposit { amount } -> u256 uses (mut balance) {
   │         ^^^^^^^^^^^^^^^^^^ Deposit

note: 
   ┌─ contract_effects.fe:11:19
   │
11 │         Deposit { amount } -> u256 uses (mut balance) {
   │                   ^^^^^^ u256

note: 
   ┌─ contract_effects.fe:11:55
   │  
11 │           Deposit { amount } -> u256 uses (mut balance) {
   │ ╭───────────────────────────────────────────────────────^
12 │ │             balance += amount
13 │ │             balance
14 │ │         }
   │ ╰─────────^ u256

note: 
   ┌─ contract_effects.fe:12:13
   │
12 │             balance += amount
   │             ^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:12:13
   │
12 │             balance += amount
   │             ^^^^^^^^^^^^^^^^^ ()

note: 
   ┌─ contract_effects.fe:12:24
   │
12 │             balance += amount
   │                        ^^^^^^ u256

note: 
   ┌─ contract_effects.fe:13:13
   │
13 │             balance
   │             ^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:16:9
   │
16 │         Withdraw { amount } -> bool
   │         ^^^^^^^^^^^^^^^^^^^ Withdraw

note: 
   ┌─ contract_effects.fe:16:20
   │
16 │         Withdraw { amount } -> bool
   │                    ^^^^^^ u256

note: 
   ┌─ contract_effects.fe:18:9
   │  
18 │ ╭         {
19 │ │             withdraw(amount)
20 │ │         }
   │ ╰─────────^ bool

note: 
   ┌─ contract_effects.fe:19:13
   │
19 │             withdraw(amount)
   │             ^^^^^^^^ fn withdraw

note: 
   ┌─ contract_effects.fe:19:13
   │
19 │             withdraw(amount)
   │             ^^^^^^^^^^^^^^^^ bool

note: 
   ┌─ contract_effects.fe:19:22
   │
19 │             withdraw(amount)
   │                      ^^^^^^ u256

note: 
   ┌─ contract_effects.fe:22:9
   │
22 │         Balance -> u256 uses (balance) {
   │         ^^^^^^^ Balance

note: 
   ┌─ contract_effects.fe:22:40
   │  
22 │           Balance -> u256 uses (balance) {
   │ ╭────────────────────────────────────────^
23 │ │             balance
24 │ │         }
   │ ╰─────────^ u256

note: 
   ┌─ contract_effects.fe:23:13
   │
23 │             balance
   │             ^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:30:5
   │
30 │     Deposit { amount: u256 } -> u256,
   │     ^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:33:5
   │
33 │     Withdraw { amount: u256 } -> bool,
   │     ^^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:36:5
   │
36 │     Balance -> u256,
   │     ^^^^^^^ Balance

note: 
   ┌─ contract_effects.fe:50:40
   │  
50 │       fn eq(self, _ other: Self) -> bool {
   │ ╭────────────────────────────────────────^
51 │ │         self.inner == other.inner
52 │ │     }
   │ ╰─────^ bool

note: 
   ┌─ contract_effects.fe:51:9
   │
51 │         self.inner == other.inner
   │         ^^^^ Address

note: 
   ┌─ contract_effects.fe:51:9
   │
51 │         self.inner == other.inner
   │         ^^^^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:51:9
   │
51 │         self.inner == other.inner
   │         ^^^^^^^^^^^^^^^^^^^^^^^^^ bool

note: 
   ┌─ contract_effects.fe:51:23
   │
51 │         self.inner == other.inner
   │                       ^^^^^ Address

note: 
   ┌─ contract_effects.fe:51:23
   │
51 │         self.inner == other.inner
   │                       ^^^^^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:57:1
   │  
57 │ ╭ {
58 │ │     if ctx.caller() == owner && amount >= balance {
59 │ │         balance -= amount
60 │ │         true
   · │
63 │ │     }
64 │ │ }
   │ ╰─^ bool

note: 
   ┌─ contract_effects.fe:58:5
   │  
58 │ ╭     if ctx.caller() == owner && amount >= balance {
59 │ │         balance -= amount
60 │ │         true
61 │ │     } else {
62 │ │         false
63 │ │     }
   │ ╰─────^ bool

note: 
   ┌─ contract_effects.fe:58:8
   │
58 │     if ctx.caller() == owner && amount >= balance {
   │        ^^^ __effprov0

note: 
   ┌─ contract_effects.fe:58:8
   │
58 │     if ctx.caller() == owner && amount >= balance {
   │        ^^^^^^^^^^^^ Address

note: 
   ┌─ contract_effects.fe:58:8
   │
58 │     if ctx.caller() == owner && amount >= balance {
   │        ^^^^^^^^^^^^^^^^^^^^^ bool

note: 
   ┌─ contract_effects.fe:58:8
   │
58 │     if ctx.caller() == owner && amount >= balance {
   │        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ bool

note: 
   ┌─ contract_effects.fe:58:24
   │
58 │     if ctx.caller() == owner && amount >= balance {
   │                        ^^^^^ Address

note: 
   ┌─ contract_effects.fe:58:33
   │
58 │     if ctx.caller() == owner && amount >= balance {
   │                                 ^^^^^^ u256

note: 
   ┌─ contract_effects.fe:58:33
   │
58 │     if ctx.caller() == owner && amount >= balance {
   │                                 ^^^^^^^^^^^^^^^^^ bool

note: 
   ┌─ contract_effects.fe:58:43
   │
58 │     if ctx.caller() == owner && amount >= balance {
   │                                           ^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:58:51
   │  
58 │       if ctx.caller() == owner && amount >= balance {
   │ ╭───────────────────────────────────────────────────^
59 │ │         balance -= amount
60 │ │         true
61 │ │     } else {
   │ ╰─────^ bool

note: 
   ┌─ contract_effects.fe:59:9
   │
59 │         balance -= amount
   │         ^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:59:9
   │
59 │         balance -= amount
   │         ^^^^^^^^^^^^^^^^^ ()

note: 
   ┌─ contract_effects.fe:59:20
   │
59 │         balance -= amount
   │                    ^^^^^^ u256

note: 
   ┌─ contract_effects.fe:60:9
   │
60 │         true
   │         ^^^^ bool

note: 
   ┌─ contract_effects.fe:61:12
   │  
61 │       } else {
   │ ╭────────────^
62 │ │         false
63 │ │     }
   │ ╰─────^ bool

note: 
   ┌─ contract_effects.fe:62:9
   │
62 │         false
   │         ^^^^^ bool

note: 
   ┌─ contract_effects.fe:70:32
   │  
70 │       fn caller(self) -> Address {
   │ ╭────────────────────────────────^
71 │ │         self.caller
72 │ │     }
   │ ╰─────^ Address

note: 
   ┌─ contract_effects.fe:71:9
   │
71 │         self.caller
   │         ^^^^ MockCtx

note: 
   ┌─ contract_effects.fe:71:9
   │
71 │         self.caller
   │         ^^^^^^^^^^^ Address

note: 
   ┌─ contract_effects.fe:75:20
   │  
75 │   fn test_withdraw() {
   │ ╭────────────────────^
76 │ │     let ctx = MockCtx { caller: Address { inner: 0xbeef } }
77 │ │     let owner = Address { inner: 0xfe }
78 │ │     let mut balance = 100
   · │
81 │ │     }
82 │ │ }
   │ ╰─^ ()

note: 
   ┌─ contract_effects.fe:76:9
   │
76 │     let ctx = MockCtx { caller: Address { inner: 0xbeef } }
   │         ^^^ MockCtx

note: 
   ┌─ contract_effects.fe:76:15
   │
76 │     let ctx = MockCtx { caller: Address { inner: 0xbeef } }
   │               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ MockCtx

note: 
   ┌─ contract_effects.fe:76:33
   │
76 │     let ctx = MockCtx { caller: Address { inner: 0xbeef } }
   │                                 ^^^^^^^^^^^^^^^^^^^^^^^^^ Address

note: 
   ┌─ contract_effects.fe:76:50
   │
76 │     let ctx = MockCtx { caller: Address { inner: 0xbeef } }
   │                                                  ^^^^^^ u256

note: 
   ┌─ contract_effects.fe:77:9
   │
77 │     let owner = Address { inner: 0xfe }
   │         ^^^^^ Address

note: 
   ┌─ contract_effects.fe:77:17
   │
77 │     let owner = Address { inner: 0xfe }
   │                 ^^^^^^^^^^^^^^^^^^^^^^^ Address

note: 
   ┌─ contract_effects.fe:77:34
   │
77 │     let owner = Address { inner: 0xfe }
   │                                  ^^^^ u256

note: 
   ┌─ contract_effects.fe:78:9
   │
78 │     let mut balance = 100
   │         ^^^^^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:78:23
   │
78 │     let mut balance = 100
   │                       ^^^ u256

note: 
   ┌─ contract_effects.fe:79:5
   │  
79 │ ╭     with (ctx, owner, balance) {
80 │ │         let ok = withdraw(amount: 100)
81 │ │     }
   │ ╰─────^ ()

note: 
   ┌─ contract_effects.fe:79:11
   │
79 │     with (ctx, owner, balance) {
   │           ^^^ MockCtx

note: 
   ┌─ contract_effects.fe:79:16
   │
79 │     with (ctx, owner, balance) {
   │                ^^^^^ Address

note: 
   ┌─ contract_effects.fe:79:23
   │
79 │     with (ctx, owner, balance) {
   │                       ^^^^^^^ u256

note: 
   ┌─ contract_effects.fe:79:32
   │  
79 │       with (ctx, owner, balance) {
   │ ╭────────────────────────────────^
80 │ │         let ok = withdraw(amount: 100)
81 │ │     }
   │ ╰─────^ ()

note: 
   ┌─ contract_effects.fe:80:13
   │
80 │         let ok = withdraw(amount: 100)
   │             ^^ bool

note: 
   ┌─ contract_effects.fe:80:18
   │
80 │         let ok = withdraw(amount: 100)
   │                  ^^^^^^^^ fn withdraw

note: 
   ┌─ contract_effects.fe:80:18
   │
80 │         let ok = withdraw(amount: 100)
   │                  ^^^^^^^^^^^^^^^^^^^^^ bool

note: 
   ┌─ contract_effects.fe:80:35
   │
80 │         let ok = withdraw(amount: 100)
   │                                   ^^^ u256
