---
source: crates/language-server/tests/references_snap.rs
assertion_line: 128
expression: snapshot
---
0: // Test struct field access resolution
1: struct Container {
2:     pub value: u32
3: }
4: 
5: impl Container {
6:     pub fn get(self) -> u32 {
7:         self.value
8:     }
9: }
10: 
11: // Test enum variant resolution
12: enum Color {
13:     Red,
14:     Green { intensity: u32 },
15:     Blue(u32)
16: }
17: 
18: fn test_field_access() {
19:     let container = Container { value: 43 }
20: 
21:     // This should resolve to the field definition
22:     let val = container.value
23: 
24:     // This should resolve to the method definition
25:     let retrieved = container.get()
26: 
27:     // Test local variable references
28:     let copy_container = container  // should resolve to line 20
29:     let copy_val = val             // should resolve to line 23
30: }
31: 
32: fn test_enum_variants() {
33:     // These should resolve to the specific variants, not the enum
34:     let red = Color::Red
35:     let green = Color::Green { intensity: 50 }
36:     let blue = Color::Blue(100)
37: 
38:     // Test pattern matching field resolution
39:     match green {
40:         Color::Green { intensity } => {
41:             // 'intensity' here should resolve to the field in the enum variant
42:             let _val = intensity
43:         }
44:         _ => {}
45:     }
46: }
47: 
48: pub trait Inner {
49:     fn foo(self) -> i32
50: }
51: 
52: pub struct Wrapper<S: Inner> {
53:     pub inner: S,
54: }
55: 
56: impl<S: Inner> Wrapper<S> {
57:     pub fn foo(mut self, mut dog: i32) -> i32 {
58:         self.inner.foo() // collect_constraints_from_func_def
59:         dog
60:     }
61: }
62: 
---
cursor (7, 8): 2 refs -> goto_comprehensive.fe: 6:15; 7:8
cursor (7, 13): 1 refs -> goto_comprehensive.fe: goto_comprehensive::Container @ 2:8
cursor (19, 8): 4 refs -> goto_comprehensive.fe: goto_comprehensive::test_field_access::{fn_body} @ 19:8; goto_comprehensive::test_field_access::{fn_body} @ 22:14; goto_comprehensive::test_field_access::{fn_body} @ 25:20; goto_comprehensive::test_field_access::{fn_body} @ 28:25
cursor (22, 8): 2 refs -> goto_comprehensive.fe: goto_comprehensive::test_field_access::{fn_body} @ 22:8; goto_comprehensive::test_field_access::{fn_body} @ 29:19
cursor (22, 14): 4 refs -> goto_comprehensive.fe: goto_comprehensive::test_field_access::{fn_body} @ 19:8; goto_comprehensive::test_field_access::{fn_body} @ 22:14; goto_comprehensive::test_field_access::{fn_body} @ 25:20; goto_comprehensive::test_field_access::{fn_body} @ 28:25
cursor (22, 24): 1 refs -> goto_comprehensive.fe: goto_comprehensive::Container @ 2:8
cursor (25, 8): 1 refs -> goto_comprehensive.fe: goto_comprehensive::test_field_access::{fn_body} @ 25:8
cursor (25, 20): 4 refs -> goto_comprehensive.fe: goto_comprehensive::test_field_access::{fn_body} @ 19:8; goto_comprehensive::test_field_access::{fn_body} @ 22:14; goto_comprehensive::test_field_access::{fn_body} @ 25:20; goto_comprehensive::test_field_access::{fn_body} @ 28:25
cursor (28, 8): 1 refs -> goto_comprehensive.fe: goto_comprehensive::test_field_access::{fn_body} @ 28:8
cursor (28, 25): 4 refs -> goto_comprehensive.fe: goto_comprehensive::test_field_access::{fn_body} @ 19:8; goto_comprehensive::test_field_access::{fn_body} @ 22:14; goto_comprehensive::test_field_access::{fn_body} @ 25:20; goto_comprehensive::test_field_access::{fn_body} @ 28:25
cursor (29, 8): 1 refs -> goto_comprehensive.fe: goto_comprehensive::test_field_access::{fn_body} @ 29:8
cursor (29, 19): 2 refs -> goto_comprehensive.fe: goto_comprehensive::test_field_access::{fn_body} @ 22:8; goto_comprehensive::test_field_access::{fn_body} @ 29:19
cursor (34, 8): 1 refs -> goto_comprehensive.fe: goto_comprehensive::test_enum_variants::{fn_body} @ 34:8
cursor (34, 14): 1 refs -> goto_comprehensive.fe: goto_comprehensive::Color @ 12:5
cursor (34, 21): 2 refs -> goto_comprehensive.fe: goto_comprehensive::Color @ 13:4; goto_comprehensive::test_enum_variants::{fn_body} @ 34:21
cursor (35, 8): 2 refs -> goto_comprehensive.fe: goto_comprehensive::test_enum_variants::{fn_body} @ 35:8; goto_comprehensive::test_enum_variants::{fn_body} @ 39:10
cursor (36, 8): 1 refs -> goto_comprehensive.fe: goto_comprehensive::test_enum_variants::{fn_body} @ 36:8
cursor (36, 15): 1 refs -> goto_comprehensive.fe: goto_comprehensive::Color @ 12:5
cursor (36, 22): 2 refs -> goto_comprehensive.fe: goto_comprehensive::Color @ 15:4; goto_comprehensive::test_enum_variants::{fn_body} @ 36:22
cursor (39, 10): 2 refs -> goto_comprehensive.fe: goto_comprehensive::test_enum_variants::{fn_body} @ 35:8; goto_comprehensive::test_enum_variants::{fn_body} @ 39:10
cursor (40, 23): 2 refs -> goto_comprehensive.fe: goto_comprehensive::test_enum_variants::{fn_body} @ 40:23; goto_comprehensive::test_enum_variants::{fn_body} @ 42:23
cursor (42, 16): 1 refs -> goto_comprehensive.fe: goto_comprehensive::test_enum_variants::{fn_body} @ 42:16
cursor (42, 23): 2 refs -> goto_comprehensive.fe: goto_comprehensive::test_enum_variants::{fn_body} @ 40:23; goto_comprehensive::test_enum_variants::{fn_body} @ 42:23
cursor (58, 8): 2 refs -> goto_comprehensive.fe: 57:19; 58:8
cursor (58, 13): 1 refs -> goto_comprehensive.fe: goto_comprehensive::Wrapper @ 53:8
cursor (59, 8): 2 refs -> goto_comprehensive.fe: 57:29; 59:8
