struct Counter {
    value: u256,
}

fn needs_mut_counter() uses (slot: mut Counter) {
    slot.value += 1
}

fn typed_mut_with_mut_binding_is_ok() {
    let mut c = Counter { value: 0 }
    with (Counter = c) {
        needs_mut_counter()
    }
}

fn typed_mut_with_ref_borrow_reports_mut_mismatch() {
    let mut c = Counter { value: 0 }
    with (Counter = ref c) {
        needs_mut_counter()
    }
}
