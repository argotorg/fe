---
source: crates/codegen/tests/sonatina_ir.rs
expression: output
input_file: crates/codegen/tests/fixtures/storage.fe
---
target = evm-ethereum-osaka

func public %transfer_result_code(v0.i256) -> i256 {
    block0:
        jump block4;

    block1:
        jump block2;

    block2:
        v2.i256 = phi (0.i256 block1) (1.i256 block3);
        return v2;

    block3:
        jump block2;

    block4:
        v4.i256 = phi (v0 block0);
        v5.i256 = mload v4 i256;
        v6.i256 = eq v5 0.i256;
        br v6 block1 block6;

    block5:
        evm_invalid;

    block6:
        v7.i256 = eq v5 1.i256;
        br v7 block3 block5;
}

func public %abi_encode(v0.i256, v1.i256) {
    block0:
        mstore 0.i256 v0 i256;
        evm_return 0.i256 32.i256;
}

func public %credit__StorPtr_CoinStore__StorPtr_TotalSupply___c407f5b00af9ba78(v0.i256, v1.i256, v2.i256, v3.i256) -> i256 {
    block0:
        jump block4;

    block1:
        v7.i256 = phi (v21 block4);
        v6.i256 = phi (v20 block4);
        v5.i256 = phi (v19 block4);
        v8.i256 = call %credit_alice__StorPtr_CoinStore__StorPtr_TotalSupply___c407f5b00af9ba78 v5 v6 v7;
        jump block2;

    block2:
        v9.i256 = phi (v8 block1) (v13 block3);
        return v9;

    block3:
        v12.i256 = phi (v24 block6);
        v11.i256 = phi (v23 block6);
        v10.i256 = phi (v22 block6);
        v13.i256 = call %credit_bob__StorPtr_CoinStore__StorPtr_TotalSupply___c407f5b00af9ba78 v10 v11 v12;
        jump block2;

    block4:
        v21.i256 = phi (v3 block0);
        v20.i256 = phi (v2 block0);
        v19.i256 = phi (v1 block0);
        v14.i256 = phi (v0 block0);
        v15.i256 = mload v14 i256;
        v17.i256 = eq v15 0.i256;
        br v17 block1 block6;

    block5:
        evm_invalid;

    block6:
        v24.i256 = phi (v21 block4);
        v23.i256 = phi (v20 block4);
        v22.i256 = phi (v19 block4);
        v18.i256 = eq v15 1.i256;
        br v18 block3 block5;
}

func public %transfer__StorPtr_CoinStore___ba1c0d0726e89ba2(v0.i256, v1.i256, v2.i256) -> i256 {
    block0:
        jump block4;

    block1:
        v5.i256 = phi (v17 block4);
        v4.i256 = phi (v16 block4);
        v6.i256 = call %transfer_from_alice__StorPtr_CoinStore___ba1c0d0726e89ba2 v4 v5;
        jump block2;

    block2:
        v7.i256 = phi (v6 block1) (v10 block3);
        return v7;

    block3:
        v9.i256 = phi (v19 block6);
        v8.i256 = phi (v18 block6);
        v10.i256 = call %transfer_from_bob__StorPtr_CoinStore___ba1c0d0726e89ba2 v8 v9;
        jump block2;

    block4:
        v17.i256 = phi (v2 block0);
        v16.i256 = phi (v1 block0);
        v11.i256 = phi (v0 block0);
        v12.i256 = mload v11 i256;
        v14.i256 = eq v12 0.i256;
        br v14 block1 block6;

    block5:
        evm_invalid;

    block6:
        v19.i256 = phi (v17 block4);
        v18.i256 = phi (v16 block4);
        v15.i256 = eq v12 1.i256;
        br v15 block3 block5;
}

func public %balance_of__StorPtr_CoinStore___ba1c0d0726e89ba2(v0.i256, v1.i256) -> i256 {
    block0:
        jump block4;

    block1:
        v3.i256 = phi (v14 block4);
        v4.i256 = evm_sload v3;
        jump block2;

    block2:
        v5.i256 = phi (v4 block1) (v9 block3);
        return v5;

    block3:
        v6.i256 = phi (v15 block6);
        v8.i256 = add v6 1.i256;
        v9.i256 = evm_sload v8;
        jump block2;

    block4:
        v14.i256 = phi (v1 block0);
        v10.i256 = phi (v0 block0);
        v11.i256 = mload v10 i256;
        v12.i256 = eq v11 0.i256;
        br v12 block1 block6;

    block5:
        evm_invalid;

    block6:
        v15.i256 = phi (v14 block4);
        v13.i256 = eq v11 1.i256;
        br v13 block3 block5;
}

func public %balance_of_raw__StorPtr_CoinStore___ba1c0d0726e89ba2(v0.i256, v1.i256) -> i256 {
    block0:
        jump block4;

    block1:
        v3.i256 = phi (v12 block4);
        v4.i256 = evm_sload v3;
        jump block2;

    block2:
        v5.i256 = phi (v4 block1) (v9 block3);
        return v5;

    block3:
        v6.i256 = phi (v12 block4);
        v8.i256 = add v6 1.i256;
        v9.i256 = evm_sload v8;
        jump block2;

    block4:
        v12.i256 = phi (v1 block0);
        v10.i256 = phi (v0 block0);
        v11.i256 = eq v10 0.i256;
        br v11 block1 block3;
}

func public %total_supply__StorPtr_TotalSupply___2e654c25952f42f9(v0.i256) -> i256 {
    block0:
        v2.i256 = evm_sload v0;
        return v2;
}

func public %credit_alice__StorPtr_CoinStore__StorPtr_TotalSupply___c407f5b00af9ba78(v0.i256, v1.i256, v2.i256) -> i256 {
    block0:
        v4.i256 = evm_sload v1;
        v5.i256 = add v4 v0;
        evm_sstore v1 v5;
        v6.i256 = evm_sload v2;
        v7.i256 = add v6 v0;
        evm_sstore v2 v7;
        v8.i256 = evm_sload v1;
        return v8;
}

func public %credit_bob__StorPtr_CoinStore__StorPtr_TotalSupply___c407f5b00af9ba78(v0.i256, v1.i256, v2.i256) -> i256 {
    block0:
        v5.i256 = add v1 1.i256;
        v6.i256 = evm_sload v5;
        v7.i256 = add v6 v0;
        v8.i256 = add v1 1.i256;
        evm_sstore v8 v7;
        v9.i256 = evm_sload v2;
        v10.i256 = add v9 v0;
        evm_sstore v2 v10;
        v11.i256 = add v1 1.i256;
        v12.i256 = evm_sload v11;
        return v12;
}

func public %transfer_from_alice__StorPtr_CoinStore___ba1c0d0726e89ba2(v0.i256, v1.i256) -> i256 {
    block0:
        v3.i256 = evm_sload v1;
        v4.i256 = lt v3 v0;
        br v4 block1 block2;

    block1:
        v6.i256 = evm_malloc 32.i256;
        mstore v6 1.i256 i256;
        return v6;

    block2:
        v10.i256 = phi (v0 block0);
        v8.i256 = phi (v1 block0);
        v9.i256 = evm_sload v8;
        v11.i256 = sub v9 v10;
        evm_sstore v8 v11;
        v12.i256 = add v8 1.i256;
        v13.i256 = evm_sload v12;
        v14.i256 = add v13 v10;
        v15.i256 = add v8 1.i256;
        evm_sstore v15 v14;
        v16.i256 = evm_malloc 32.i256;
        mstore v16 0.i256 i256;
        return v16;
}

func public %transfer_from_bob__StorPtr_CoinStore___ba1c0d0726e89ba2(v0.i256, v1.i256) -> i256 {
    block0:
        v4.i256 = add v1 1.i256;
        v5.i256 = evm_sload v4;
        v6.i256 = lt v5 v0;
        br v6 block1 block2;

    block1:
        v8.i256 = evm_malloc 32.i256;
        mstore v8 1.i256 i256;
        return v8;

    block2:
        v12.i256 = phi (v0 block0);
        v9.i256 = phi (v1 block0);
        v10.i256 = add v9 1.i256;
        v11.i256 = evm_sload v10;
        v13.i256 = sub v11 v12;
        v14.i256 = add v9 1.i256;
        evm_sstore v14 v13;
        v15.i256 = evm_sload v9;
        v16.i256 = add v15 v12;
        evm_sstore v9 v16;
        v17.i256 = evm_malloc 32.i256;
        mstore v17 0.i256 i256;
        return v17;
}

func public %init__StorPtr_Evm___207f35a85ac4062e() {
    block0:
        v1.i256 = sym_size &runtime__StorPtr_Evm___207f35a85ac4062e;
        v2.i256 = sym_addr &runtime__StorPtr_Evm___207f35a85ac4062e;
        evm_code_copy 0.i256 v2 v1;
        evm_return 0.i256 v1;
}

func public %runtime__StorPtr_Evm___207f35a85ac4062e() {
    block0:
        v1.i256 = call %stor_ptr__Evm_CoinStore__d1ec7298de486d2f 0.i256;
        v3.i256 = call %stor_ptr__Evm_TotalSupply__b0f1a753085dcbd 2.i256;
        v4.i256 = evm_calldata_load 0.i256;
        v6.i256 = shr 224.i256 v4;
        jump block14;

    block1:
        v8.i256 = evm_calldata_load 4.i256;
        v10.i256 = evm_calldata_load 36.i256;
        jump block5;

    block2:
        v13.i256 = phi (v50 block5);
        v12.i256 = phi (v49 block5);
        v11.i256 = phi (v48 block5);
        v14.i256 = call %credit_alice__StorPtr_CoinStore__StorPtr_TotalSupply___c407f5b00af9ba78 v11 v12 v13;
        jump block3;

    block3:
        v15.i256 = phi (v14 block2) (v19 block4);
        call %abi_encode v15 0.i256;
        evm_invalid;

    block4:
        v18.i256 = phi (v50 block5);
        v17.i256 = phi (v49 block5);
        v16.i256 = phi (v48 block5);
        v19.i256 = call %credit_bob__StorPtr_CoinStore__StorPtr_TotalSupply___c407f5b00af9ba78 v16 v17 v18;
        jump block3;

    block5:
        v50.i256 = phi (v52 block1);
        v49.i256 = phi (v51 block1);
        v48.i256 = phi (v10 block1);
        v20.i256 = phi (v8 block1);
        v21.i256 = eq v20 0.i256;
        br v21 block2 block4;

    block6:
        v23.i256 = phi (v53 block15);
        v22.i256 = evm_calldata_load 4.i256;
        v24.i256 = call %balance_of_raw__StorPtr_CoinStore___ba1c0d0726e89ba2 v22 v23;
        call %abi_encode v24 0.i256;
        evm_invalid;

    block7:
        v25.i256 = evm_calldata_load 4.i256;
        v26.i256 = evm_calldata_load 36.i256;
        jump block11;

    block8:
        v28.i256 = phi (v55 block11);
        v27.i256 = phi (v54 block11);
        v29.i256 = call %transfer_from_alice__StorPtr_CoinStore___ba1c0d0726e89ba2 v27 v28;
        jump block9;

    block9:
        v30.i256 = phi (v29 block8) (v34 block10);
        v31.i256 = call %transfer_result_code v30;
        call %abi_encode v31 0.i256;
        evm_invalid;

    block10:
        v33.i256 = phi (v55 block11);
        v32.i256 = phi (v54 block11);
        v34.i256 = call %transfer_from_bob__StorPtr_CoinStore___ba1c0d0726e89ba2 v32 v33;
        jump block9;

    block11:
        v55.i256 = phi (v56 block7);
        v54.i256 = phi (v26 block7);
        v35.i256 = phi (v25 block7);
        v36.i256 = eq v35 0.i256;
        br v36 block8 block10;

    block12:
        v37.i256 = phi (v57 block17);
        v38.i256 = call %total_supply__StorPtr_TotalSupply___2e654c25952f42f9 v37;
        call %abi_encode v38 0.i256;
        evm_invalid;

    block13:
        evm_return 0.i256 0.i256;

    block14:
        v52.i256 = phi (v3 block0);
        v51.i256 = phi (v1 block0);
        v39.i256 = phi (v6 block0);
        v44.i256 = eq v39 2877082652.i256;
        br v44 block1 block15;

    block15:
        v53.i256 = phi (v51 block14);
        v45.i256 = eq v39 1818602213.i256;
        br v45 block6 block16;

    block16:
        v56.i256 = phi (v53 block15);
        v46.i256 = eq v39 217554442.i256;
        br v46 block7 block17;

    block17:
        v57.i256 = phi (v52 block16);
        v47.i256 = eq v39 960555502.i256;
        br v47 block12 block13;
}

func public %stor_ptr__Evm_CoinStore__d1ec7298de486d2f(v0.i256) -> i256 {
    block0:
        v2.i256 = call %storptr_t__effectref_from_raw__CoinStore__fc61705bf538fde2 v0;
        return v2;
}

func public %stor_ptr__Evm_TotalSupply__b0f1a753085dcbd(v0.i256) -> i256 {
    block0:
        v2.i256 = call %storptr_t__effectref_from_raw__CoinStore__fc61705bf538fde2 v0;
        return v2;
}

func public %storptr_t__effectref_from_raw__CoinStore__fc61705bf538fde2(v0.i256) -> i256 {
    block0:
        return v0;
}


object @Coin {
    section init {
        entry %init__StorPtr_Evm___207f35a85ac4062e;
        embed .runtime as &runtime__StorPtr_Evm___207f35a85ac4062e;
    }
    section runtime {
        entry %runtime__StorPtr_Evm___207f35a85ac4062e;
    }
}
