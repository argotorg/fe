---
source: crates/codegen/tests/yul.rs
expression: output
input_file: tests/fixtures/alloc.fe
---
function $bump($size) -> ret {
  let v0 := $alloc($size)
  ret := v0
  leave
}
function $bump_const() -> ret {
  let v0 := $alloc(64)
  ret := v0
  leave
}
function $alloc($size) -> ret {
  let v0 := mload(64)
  let v1 := mload(128)
  let v2 := gt(v1, v0)
  if v2 {
    v0 := v1
  }
  let v3 := eq(v0, 0)
  if v3 {
    let v4 := msize()
    v0 := v4
    let v5 := lt(v0, 8192)
    if v5 {
      v0 := 8192
    }
    mstore(64, add(v0, $size))
    ret := v0
    leave
  }
  if iszero(v3) {
    mstore(64, add(v0, $size))
    ret := v0
    leave
  }
}
