---
source: crates/codegen/tests/yul.rs
expression: output
input_file: tests/fixtures/code_region.fe
---
object "Foo" {
  code {
    function $allocate($bytes, $mem) -> ret {
      let v0 := mload(64)
      let v1 := $u256_eq_eq(v0, 0)
      let v2 := v1
      if v2 {
        v0 := 96
      }
      let v3 := $u256_add_add(v0, $bytes)
      mstore(64, v3)
      ret := v0
      leave
    }
    function $evm_create_create2_raw($self, $value, $offset, $len, $salt) -> ret {
      let v0 := create2($value, $offset, $len, $salt)
      ret := v0
      leave
    }
    function $init__StorPtr_Evm___207f35a85ac4062e() {
      let v0 := datasize("Child")
      let v1 := dataoffset("Child")
      let v2 := $allocate(v0, 0)
      let v3 := v2
      codecopy(v3, v1, v0)
      let v4 := $evm_create_create2_raw(0, 0, v1, v0, 4660)
      pop(v4)
      let v5 := datasize("Foo_deployed")
      let v6 := dataoffset("Foo_deployed")
      let v7 := $allocate(v5, 0)
      let v8 := v7
      codecopy(v8, v6, v5)
      return(v8, v5)
    }
    function $u256_add_add($self, $other) -> ret {
      let v0 := add($self, $other)
      let v1 := lt(v0, $self)
      let v2 := v1
      if v2 {
        revert(0, 0)
      }
      ret := v0
      leave
    }
    function $u256_eq_eq($self, $other) -> ret {
      let v0 := eq($self, $other)
      ret := v0
      leave
    }
    $init__StorPtr_Evm___207f35a85ac4062e()
  }

  object "Foo_deployed" {
    code {
      function $balance($ops) {
        return(0, 0)
      }
      function $read_selector($ops) -> ret {
        let v0 := calldataload(0)
        ret := shr(224, v0)
        leave
      }
      function $runtime__StorPtr_Evm___207f35a85ac4062e() {
        let v0 := $read_selector(0)
        switch v0
          case 305419896 {
            $transfer(0)
          }
          case 591751049 {
            $balance(0)
          }
          default {
          }
        return(0, 0)
      }
      function $transfer($ops) {
        return(0, 0)
      }
      $runtime__StorPtr_Evm___207f35a85ac4062e()
      return(0, 0)
    }
  }
  object "Child" {
    code {
      function $child_init__StorPtr_Evm___207f35a85ac4062e() {
        let v0 := datasize("Child_deployed")
        let v1 := dataoffset("Child_deployed")
        codecopy(0, v1, v0)
        return(0, v0)
      }
      $child_init__StorPtr_Evm___207f35a85ac4062e()
    }

    object "Child_deployed" {
      code {
        function $child_runtime__StorPtr_Evm___207f35a85ac4062e() {
          calldatacopy(0, 0, 4)
          return(0, 4)
        }
        $child_runtime__StorPtr_Evm___207f35a85ac4062e()
        return(0, 0)
      }
    }
  }
}
